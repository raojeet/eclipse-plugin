package smartqa.handlers;

import org.eclipse.core.commands.AbstractHandler;
import org.eclipse.core.commands.ExecutionEvent;
import org.eclipse.core.commands.ExecutionException;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Shell;

import smartqa.MainApp;

public class OpenTestCasePanelHandler extends AbstractHandler {

    @Override
    public Object execute(ExecutionEvent event) throws ExecutionException {
        // Get the display
        Display display = Display.getDefault();

        // Create the shell (window) for the TestCasePanel
        Shell shell = new Shell(display);
        // Pass the existing shell to MainApp
        new MainApp(shell);

        // Open the shell
        shell.open();

        // Event loop to keep the shell active
        while (!shell.isDisposed()) {
            if (!display.readAndDispatch()) {
                display.sleep();  // If no events, sleep until the next event
            }
        }

        return null;
    }
}
